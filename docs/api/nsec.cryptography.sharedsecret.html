<!DOCTYPE html>
<html lang="en"><head><title>SharedSecret Class | NSec</title><meta content="Represents the output of a key agreement and the
input for a key derivation." name="description"><link href="https://nsec.rocks/docs/api/nsec.cryptography.sharedsecret" rel="canonical"><link href="/style.css" rel="stylesheet"><meta content="width=device-width, initial-scale=1" name="viewport"></head><body><header><div class="icons"><a class="icon nuget-icon" href="https://www.nuget.org/packages/NSec.Cryptography/25.4.0" title="NuGet"></a><a class="icon github-icon" href="https://github.com/ektrah/nsec" title="GitHub"></a></div><nav><ol typeof="BreadcrumbList" vocab="https://schema.org/"><li property="itemListElement" typeof="ListItem"><a href="/" property="item" typeof="WebPage"><span property="name">NSec</span></a><meta content="1" property="position"></li> / <li property="itemListElement" typeof="ListItem"><a href="/docs/" property="item" typeof="WebPage"><span property="name">NSec Documentation</span></a><meta content="2" property="position"></li> / <li property="itemListElement" typeof="ListItem"><a href="/docs/api/" property="item" typeof="WebPage"><span property="name">API Reference</span></a><meta content="3" property="position"></li> / <li property="itemListElement" typeof="ListItem"><a href="/docs/api/nsec.cryptography" property="item" typeof="WebPage"><span property="name">NSec.Cryptography</span></a><meta content="4" property="position"></li> / <li property="itemListElement" typeof="ListItem"><span property="name">SharedSecret</span><meta content="5" property="position"></li></ol></nav></header><main><h1>SharedSecret Class</h1><p>Represents the output of a <a href="/docs/api/nsec.cryptography.keyagreementalgorithm">key agreement</a> and the
input for a <a href="/docs/api/nsec.cryptography.keyderivationalgorithm">key derivation</a>.</p><pre data-lang="C#"><span class="k">public</span> <span class="k">sealed</span> <span class="k">class</span> SharedSecret : IDisposable</pre><h2 id="summary">Summary</h2><nav><ul><li><a href="#properties">Properties</a><ul><li><a href="#exportpolicy">ExportPolicy</a></li><li><a href="#size">Size</a></li></ul></li><li><a href="#static-methods">Static Methods</a><ul><li><a href="#import-readonlyspan-byte-sharedsecretblobformat-in-sharedsecretcreationparameters">Import(ReadOnlySpan&lt;byte&gt;, SharedSecretBlobFormat, in SharedSecretCreationParameters)</a></li><li><a href="#tryimport-readonlyspan-byte-sharedsecretblobformat-out-sharedsecret-in-sharedsecretcreationparameters">TryImport(ReadOnlySpan&lt;byte&gt;, SharedSecretBlobFormat, out SharedSecret?, in SharedSecretCreationParameters)</a></li></ul></li><li><a href="#methods">Methods</a><ul><li><a href="#dispose">Dispose()</a></li><li><a href="#export-sharedsecretblobformat">Export(SharedSecretBlobFormat)</a></li><li><a href="#getexportblobsize-sharedsecretblobformat">GetExportBlobSize(SharedSecretBlobFormat)</a></li><li><a href="#tryexport-sharedsecretblobformat-span-byte-out-int">TryExport(SharedSecretBlobFormat, Span&lt;byte&gt;, out int)</a></li></ul></li><li><a href="#thread-safety">Thread Safety</a></li><li><a href="#see-also">See Also</a></li></ul></nav><h2 id="properties">Properties</h2><h3 id="exportpolicy">ExportPolicy</h3><p>Gets the export policy for the shared secret.</p><pre data-lang="C#"><span class="k">public</span> KeyExportPolicies ExportPolicy { <span class="k">get</span>; }</pre><h4>Property Value</h4><p>A bitwise combination of <a href="/docs/api/nsec.cryptography.keyexportpolicies">KeyExportPolicies</a> values
that specifies the export policy for the shared secret.</p><h3 id="size">Size</h3><p>Gets the size of the shared secret.</p><pre data-lang="C#"><span class="k">public</span> <span class="k">int</span> Size { <span class="k">get</span>; }</pre><h4>Property Value</h4><p>The size, in bytes, of the shared secret.</p><h2 id="static-methods">Static Methods</h2><h3 id="import-readonlyspan-byte-sharedsecretblobformat-in-sharedsecretcreationparameters">Import(ReadOnlySpan&lt;byte&gt;, SharedSecretBlobFormat, in SharedSecretCreationParameters)</h3><p>Imports the specified shared secret BLOB in the specified format.</p><pre data-lang="C#"><span class="k">public</span> <span class="k">static</span> SharedSecret Import(
    ReadOnlySpan&lt;<span class="k">byte</span>&gt; blob,
    SharedSecretBlobFormat format,
    <span class="k">in</span> SharedSecretCreationParameters creationParameters = <span class="k">default</span>)</pre><h4>Parameters</h4><dl><dt>blob</dt><dd>The shared secret BLOB to import.</dd><dt>format</dt><dd>One of the <a href="/docs/api/nsec.cryptography.sharedsecretblobformat">SharedSecretBlobFormat</a> values that specifies the
format of the shared secret BLOB.</dd><dt>creationParameters</dt><dd>A <a href="/docs/api/nsec.cryptography.sharedsecretcreationparameters">SharedSecretCreationParameters</a> value that specifies
advanced parameters for the creation of the <a href="/docs/api/nsec.cryptography.sharedsecret">SharedSecret</a> instance.</dd></dl><h4>Return Value</h4><p>A new instance of the <a href="/docs/api/nsec.cryptography.sharedsecret">SharedSecret</a> class that represents the imported shared secret.</p><h4>Exceptions</h4><dl><dt>ArgumentException</dt><dd>The specified format is not supported.</dd><dt>FormatException</dt><dd>The shared secret BLOB is not in the correct format.</dd></dl><h3 id="tryimport-readonlyspan-byte-sharedsecretblobformat-out-sharedsecret-in-sharedsecretcreationparameters">TryImport(ReadOnlySpan&lt;byte&gt;, SharedSecretBlobFormat, out SharedSecret?, in SharedSecretCreationParameters)</h3><p>Attempts to import the specified shared secret BLOB in the specified format.</p><pre data-lang="C#"><span class="k">public</span> <span class="k">static</span> <span class="k">bool</span> TryImport(
    ReadOnlySpan&lt;<span class="k">byte</span>&gt; blob,
    SharedSecretBlobFormat format,
    <span class="k">out</span> SharedSecret? result,
    <span class="k">in</span> SharedSecretCreationParameters creationParameters = <span class="k">default</span>)</pre><h4>Parameters</h4><dl><dt>blob</dt><dd>The shared secret BLOB to import.</dd><dt>format</dt><dd>One of the <a href="/docs/api/nsec.cryptography.sharedsecretblobformat">SharedSecretBlobFormat</a> values that specifies the
format of the shared secret BLOB.</dd><dt>result</dt><dd>When this method returns, contains a new instance of the <a href="/docs/api/nsec.cryptography.sharedsecret">SharedSecret</a>
class that represents the imported shared secret, or <code>null</code> if the import fails.</dd><dt>creationParameters</dt><dd>A <a href="/docs/api/nsec.cryptography.sharedsecretcreationparameters">SharedSecretCreationParameters</a> value that specifies
advanced parameters for the creation of the <a href="/docs/api/nsec.cryptography.sharedsecret">SharedSecret</a> instance.</dd></dl><h4>Return Value</h4><p><code>true</code> if the import succeeds; otherwise, <code>false</code>.</p><h4>Exceptions</h4><dl><dt>ArgumentException</dt><dd>The specified format is not supported.</dd></dl><h2 id="methods">Methods</h2><h3 id="dispose">Dispose()</h3><p>Securely erases the shared secret from memory and releases all resources used by
the current instance of the <a href="/docs/api/nsec.cryptography.sharedsecret">SharedSecret</a> class.</p><pre data-lang="C#"><span class="k">public</span> <span class="k">void</span> Dispose()</pre><h3 id="export-sharedsecretblobformat">Export(SharedSecretBlobFormat)</h3><p>Exports the shared secret as a BLOB in the specified format and returns it as an array
of bytes.</p><pre data-lang="C#"><span class="k">public</span> <span class="k">byte</span>[] Export(
    SharedSecretBlobFormat format)</pre><h4>Parameters</h4><dl><dt>format</dt><dd>One of the <a href="/docs/api/nsec.cryptography.sharedsecretblobformat">SharedSecretBlobFormat</a> values that specifies the
format of the shared secret BLOB.</dd></dl><h4>Return Value</h4><p>A BLOB that contains the sharedf secret in the specified format.</p><h4>Exceptions</h4><dl><dt>InvalidOperationException</dt><dd>The export policy for the shared secret does not allow the shared secret to be exported.</dd><dt>ObjectDisposedException</dt><dd>The shared secret has been disposed.</dd></dl><h3 id="getexportblobsize-sharedsecretblobformat">GetExportBlobSize(SharedSecretBlobFormat)</h3><p>Returns the BLOB size of the shared secret if it were exported in the specified format.</p><pre data-lang="C#"><span class="k">public</span> <span class="k">int</span> GetExportBlobSize(
    SharedSecretBlobFormat format)</pre><h4>Parameters</h4><dl><dt>format</dt><dd>One of the <a href="/docs/api/nsec.cryptography.sharedsecretblobformat">SharedSecretBlobFormat</a> values that specifies the
format of the shared secret BLOB.</dd></dl><h4>Return Value</h4><p>The size (in bytes) of the shared secret if it were exported as a BLOB in the specified
format.</p><h4>Exceptions</h4><dl><dt>ObjectDisposedException</dt><dd>The shared secret has been disposed.</dd></dl><h3 id="tryexport-sharedsecretblobformat-span-byte-out-int">TryExport(SharedSecretBlobFormat, Span&lt;byte&gt;, out int)</h3><p>Exports the specified shared secret BLOB in the specified format and attempts to fill the
specified span of bytes with the BLOB.</p><pre data-lang="C#"><span class="k">public</span> <span class="k">bool</span> TryExport(
    SharedSecretBlobFormat format,
    Span&lt;<span class="k">byte</span>&gt; blob,
    <span class="k">out</span> <span class="k">int</span> blobSize)</pre><h4>Parameters</h4><dl><dt>format</dt><dd>One of the <a href="/docs/api/nsec.cryptography.sharedsecretblobformat">SharedSecretBlobFormat</a> values that specifies the
format of the shared secret BLOB.</dd><dt>blob</dt><dd>The span to fill with the exported shared secret BLOB.
The length of the span must be greater than or equal to
<code>GetExportBlobSize(format)</code>.</dd><dt>blobSize</dt><dd>When this method returns, contains the number of bytes written into the output
span.</dd></dl><h4>Return Value</h4><p><code>false</code> if there is not enough space in the output span to write the shared secret BLOB;
otherwise <code>true</code>.</p><h4>Exceptions</h4><dl><dt>InvalidOperationException</dt><dd>The export policy for the shared secret does not allow the shared secret to be exported.</dd><dt>ObjectDisposedException</dt><dd>The shared secret has been disposed.</dd></dl><h2 id="thread-safety">Thread Safety</h2><p>Any public static members of this type are thread safe. Any instance members are
not guaranteed to be thread safe.</p><h2 id="see-also">See Also</h2><ul><li>API Reference<ul><li><a href="/docs/api/nsec.cryptography.keyagreementalgorithm">KeyAgreementAlgorithm Class</a></li><li><a href="/docs/api/nsec.cryptography.keyderivationalgorithm">KeyDerivationAlgorithm Class</a></li><li><a href="/docs/api/nsec.cryptography.keyderivationalgorithm2">KeyDerivationAlgorithm2 Class</a></li><li><a href="/docs/api/nsec.cryptography.sharedsecretblobformat">SharedSecretBlobFormat Enum</a></li><li><a href="/docs/api/nsec.cryptography.sharedsecretcreationparameters">SharedSecretCreationParameters Struct</a></li></ul></li></ul></main><footer><p><a href="/license" rel="terms-of-use">&#169; 2025 Individual Contributors</a></p></footer></body></html>